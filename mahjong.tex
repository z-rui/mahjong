\input luaotfload.sty
\input luatypezh
\input mjmac

\normalbaselineskip=14.5pt
\normalbaselines

\centerline{麻将规则概述}

\beginsection 1. 牌

麻将牌分为数牌和字牌两类。 数牌有万、 索、 饼三种， 上有不同的花样。
每张数牌对应一至九的一个数字， 以花样的个数或以汉字表示。
$$\matrix{
  &1&2&3&4&5&6&7&8&9\cr
万&🀇&🀈&🀉&🀊&🀋&🀌&🀍&🀎&🀏\cr
索&🀐&🀑&🀒&🀓&🀔&🀕&🀖&🀗&🀘\cr
饼&🀙&🀚&🀛&🀜&🀝&🀞&🀟&🀠&🀡\cr
}$$
字牌包括风牌 （$🀀🀁🀂🀃$） 和三元牌 （$🀄🀆🀅$）。
因此， 共有 34~种不同的牌面。 每种牌面有 4~张， 因此， 共有 136~张牌。

数字为 1 或 9 的牌， 以及字牌， 统称幺九牌。

三张连续数字的同花样数牌构成一个顺子； 三张相同的牌构成一个刻子；
四张相同的牌称为杠子。 刻子 （杠子） 的其中一张来自别家打出的牌的，
称为明刻 （明杠）， 否则称为暗刻 （暗杠）。
顺子、 刻子、 杠子统称面子。 两张相同的牌构成对子。
一般而言， 和牌需要四个面子和一个对子， 这里的对子被称为雀头。

\beginsection 2. 局

每局从配牌开始， 到有人和牌或者流局结束。

开局时， 所有的牌被打乱并堆成牌山。
牌山在桌上摆成一圈， 且分上下两层。 叠在一起的上下两张牌被称为一墩。
牌山的末尾 7~墩 （14~张） 牌称为王牌， 不被摸取。
最后两墩牌称为岭上牌， 用示在开杠时补牌。
倒数第三墩的上张牌在开局时被翻开作为宝牌指示牌。
其余墩的上张牌在杠牌时被翻开， （翻开后） 也作为宝牌指示牌。

配牌时， 其中一人从牌山中取得 14~张牌， 称为东家，
其余按逆时针依次为南家、 西家、 北家， 每家 13~张牌。
每家手上有的牌称为手牌， 除副露 （见~2.2~节） 外， 只有自己可以看到。

东家先将手上的一张牌打出。 然后， 按逆时针次序轮流进行摸打。
即， 先从牌山中摸一张牌， 然后在手牌中选一张打出。
被打出的牌应整齐摆在各自面前， 称为牌河。
每一轮摸打称为一巡。

\beginsection 2.1. 和牌

当自己的手牌可以和牌， 或者别家打出了一张加入自己手牌即可和牌的牌时，
可以宣告和牌。 前一种情况称为自摸， 后一种情况称为荣和。
和牌的条件为：
\item{1.} 牌型符合四个面子加雀头的形式， 或者特殊牌型 （见第~4~节）。
\item{2.} 有役 （见第~4~节）；
\item{3.} 荣和时不存在振听 （见第~2.6~节） 的情况。

\beginsection 2.2. 鸣牌

鸣牌分为吃、 碰、 杠这几种情况。
多人鸣牌或和牌时， 和牌优先于鸣牌， 碰/杠优先于吃。

当别家打出的牌可以和手中的牌构成刻子或杠子时，
可以宣布碰牌或杠牌 （这时杠牌也称明杠）。
碰牌后， 需要把构成的刻子公开， 并放置在右手侧， 称为副露。
从别家获得的牌需要横放， 并靠左/中/右放置， 表示该牌来自上/对/下家，
如 $\sym 🀀🀀\rotl{🀀}$ （碰入的$🀀$来自下家） 或 $\sym 🀟\rotl{🀟🀟}🀟$ 
（$🀟$来自对家）。

当上家打出的牌可以和手中的牌构成顺子时， 可以宣布吃牌。
构成的顺子也要副露。

没有吃、 碰、 明杠的状态， 称为门前。

当自己摸入一张和已经副露的刻子相同的牌， 可以宣布加杠，
并把这张牌横放在已经横放的牌上。
当自已的手牌中含有一个杠子时， 可以宣布暗杠。
暗杠时将两侧两张牌背朝上， 如 $🀫🀀🀀🀫$。
不宣布暗杠的四张相同牌不算作杠子。

吃牌或碰牌后， 需打出手中的一张牌。
不允许食替 （吃入一张牌后， 打出可以和顺子中的另外两张牌构成顺子的牌）。
例如， 吃$🀊$构成顺子 $🀊🀋🀌$~时， 不允许立即打出$🀊$或$🀍$。
杠牌后， 需要先在岭上牌中摸取一张牌， 再将手牌中的一张打出，
然后翻开王牌中的另一张宝牌指示牌。
以上步骤完成后， 由鸣牌者的下家继续摸打。
注意： 碰牌和明杠有可能打乱原先的摸打次序。

\beginsection 2.3. 流局

流局分为荒牌和中途流局两种情况。

当牌山中除王牌外的牌全部被摸完时， 没有更多的牌可供摸打。
此时宣告流局 （荒牌）， 本局结束。

当发生下列情况时， 宣告中途流局， 本局提前结束：
\item{1.} 九种九牌： 某人打出第一张牌前， 如果手牌中有至少 9~张幺九牌，
且此前未有人鸣牌， 则这时他有权利宣告中途流局；
\item{2.} 四风连打： 第一巡中， 四家连续打出同一张风牌；
\item{3.} 四杠散了： 一局中 （非同一人） 开出了四个杠子；
\item{4.} 四家立直： 四家都宣告了立直 （见~2.5~节）；
\item{5.} 三家荣和： 某人打出的一张牌造成三家同时和牌。

\beginsection 2.4. 听牌

距离和牌牌型仅差一张牌的状态， 称为听牌。
对于四个面子加雀头的牌型， 听牌分为如下几种：
\item{1.} 两面听： 手牌中已有连续的两张数牌，
需要另一张构成顺子， 且有两种选择。
\itemitem{例} $🀫🀫🀫\,🀫🀫🀫\,🀫🀫🀫\,🀌🀍\,🀫🀫$ 听 $🀋🀎$。
\item{2.} 边张听： 类似， 但是因为两张数牌中有一张幺九牌， 所以只有一种选择。
\itemitem{例} $🀫🀫🀫\,🀫🀫🀫\,🀫🀫🀫\,🀗🀘\,🀫🀫$ 听 $🀖$。
\item{3.} 嵌张听： 已有顺子的头尾两张， 听中间一张。
\itemitem{例} $🀫🀫🀫\,🀫🀫🀫\,🀫🀫🀫\,🀛🀝\,🀫🀫$ 听 $🀜$。
\item{4.} 双碰听： 已有两个对子， 再得两者之一即可构成一个刻子。
\itemitem{例} $🀫🀫🀫\,🀫🀫🀫\,🀫🀫🀫\,🀀🀀\,🀂🀂$ 听 $🀀🀂$。
\item{5.} 单骑听： 剩一张单牌， 需要再取得一张构成雀头。
\itemitem{例} $🀫🀫🀫\,🀫🀫🀫\,🀫🀫🀫\,🀫🀫🀫\,🀐$ 听 $🀐$。

听牌与否， 仅靠牌面判定， 与是否可以和牌无必然联系。
如果因无役而不能和牌， 则称这类听牌为形式听牌。
如果所听的牌已经全被用完， 因而没有和牌的可能， 则称这类听牌为空听。

\beginsection 2.5. 立直

在打出一张牌时， 如果自家处于门前状态， 且即将听牌，
则这时可以宣告立直。
宣告立直时打出的牌应横放。 如这张牌被别家荣和， 则立直不成立。
如果横放的牌被鸣牌， 则下一次打出的牌仍要横放。

宣告立直需交出 1000~点， 称为供托， 归之后和牌的人。
已宣布立直的玩家， 每次摸打只允许打出摸入的牌， 不可打出其他手牌；
除暗杠外， 不允许鸣牌。

\beginsection 2.6. 振听

当所听的牌满足下列条件时， 玩家将被禁止荣和。
这种状态称为振听。 振听状态下只能通过自摸和牌。

\item{1.} 舍牌振听： 所听牌是自己曾经打出的牌；
\item{2.} 同巡振听： 所听牌是一巡之内别家打出的牌；
\item{3.} 立直振听： 在立直的情况下， 所听的牌是自己或别家曾打出的牌。

如果同时听多张牌， 任何一张听牌符合上述条件时， 就不允许荣和所有的牌。

\beginsection 3. 场

四局构成一场。 每一场有一张风牌与之对应， 称为场风牌。
东风场的四局分别称为东一局、 东二局等， 其余各场依此类推。
从东风场开始， 依据规则不同， 进行若干场比赛：

\item{1.} 东风战： 仅东风场四局；
\item{2.} 半庄战： 东风场、 南风场， 共八局；
\item{3.} 全庄战： 东、 西、 南、 北风场， 共十六局。

每局结束时， 满足以下任一种情况， 这些情况下， 局名不变， 原东家继续做东。

\item{1.} 东家和牌；
\item{2.} 荒牌， 且东家听牌；
\item{3.} 中途流局。

否则， 进入下一局， 并由原东家的下家做东家。
即， 东一局后进入东二局， 东四局后进入南一局， 其余依此类推。

东家和牌或者流局时， 下一局本场数加一， 且按照本场数将局次称为
“某某局一本场”、 “二本场”， 等等。
一旦东家以外的人和牌， 则本场数归零。

\beginsection 4. 役

当牌型或和牌方式满足一定条件时， 可获得役。 无役则不能和牌。
这些不同的条件称为各役种。 每个役种对应一个相应的翻数， 称为
“一翻役”、 “二翻役”， 等等。

有些役仅在门前状态下成立， 称为 “门前役”， 在下文中用★标记；
另一些役在非门前时， 翻数减一， 称为 “食下役”， 在下文中用▲标记。

\beginsection 4.1 一翻役

\yaku*立直
宣告立直后和牌。

\yaku*一发
宣告立直后， 一巡之内荣和或自摸。 如期间发生鸣牌， 则此役不成立。

\yaku*门前自摸
门前的情况下自摸和牌。

\yaku.断幺九
和牌牌型中不含幺九牌。

\yaku.役牌
含有役牌的刻子或杠子。 役牌包括： 场风牌、
自风牌 （东家的自风牌为$🀀$， 依此类推）、 三元牌。
有多组役牌的， 此役可以累计。
如果场风牌和自风牌是同一张牌 （称为连风牌）， 按两组役牌计算。

\yaku*平和
三个顺子加一个非役牌构成的雀头， 听牌方式必须为两面听。

\yaku*一杯口
含有两个相同的顺子。

\yaku.岭上开花
杠牌后摸入的岭上牌造成的和牌。

\yaku.枪杠
别家加杠的牌和自己的手牌构成和牌。

\yaku.海底捞月
摸入牌山中最后一张可摸的牌 （称为海底牌） 时自摸和牌。

\yaku.河底捞鱼
别家摸入海底牌后打出的牌 （称为河底牌） 造成荣和。

\beginsection 4.2 二翻役

\yaku^三色同顺
含有同数字的三种花色的顺子。

\yaku.三色同刻
含有同数字的三种花色的刻子。

\yaku^一气通贯
含有同花色的 $123\,456\,789$ 三组顺子。

\yaku.对对和
仅由刻子 （含杠子） 和雀头构成的和牌。

\yaku.三暗刻
和牌中有三组暗刻 （含暗杠）。

\yaku.三杠子
和牌中有三组杠子。

\yaku*七对子
含有七个不同的对子的特殊牌型。

\yaku^混全带幺九
面子和雀头均含有幺九牌， 且整副牌中含有字牌。

\yaku.混老头
所有牌均为幺九牌， 且整副牌中含有字牌。

\yaku.小三元
含有三元牌的两组刻子和一个对子。

\yaku*双立直
打出第一张牌时就宣布立直。 宣布立直前如有人鸣牌， 则此役不成立。

\beginsection 4.3 三翻役

\yaku^混一色
由同一花色的数牌和字牌组成的和牌。

\yaku^纯全带幺九
面子和将牌均含有幺九牌， 且整副牌不含字牌。

\yaku*二杯口
含有两组一杯口。 不与七对子累计。

\beginsection 4.4 六翻役

\yaku^清一色
由同一花色的数牌组成的和牌。

\beginsection 4.5 役满

役满的役是点数最高的役， 发生役满时， 不再考虑翻数。

\yaku*国士无双
由 $🀇🀏🀐🀘🀙🀡🀀🀁🀂🀃🀄🀆🀅$ 加上任意一张幺九牌组成的特殊牌型。
此役允许抢暗杠。
如果听 13~张幺九牌， 则称为{\bf 国士无双十三面听}。

\yaku.大三元
含有三元牌的三组刻子 （含杠子）。

\yaku*四暗刻
含有四组暗刻 （含暗杠）。 如听牌方式为单骑听，
则称为{\bf 四暗刻单骑}。

\yaku.字一色
仅由字牌构成的和牌。

\yaku.绿一色
仅由 $🀑🀒🀓🀕🀗🀅$ 构成的和牌 （因这些牌牌面上只有绿色）。

\yaku.小四喜
含有风牌的三组刻子 （含杠子） 和一个对子。

\yaku.大四喜
含有风牌的四组刻子 （含杠子）。

\yaku.清老头
所有牌均为幺九牌， 且整副牌不含字牌。

\yaku*九莲宝灯
同花色的 1112345678999 加上该花色的任意一张数牌。
如果听该花色的 9~张数牌， 则称为{\bf 纯正九莲宝灯}。

\yaku.四杠子
含有四个杠子。

\yaku*天和
东家配牌时得到的 14~张牌构成和牌。

\yaku*地和
非东家在配牌后摸入第一张牌时自摸和牌。
如此前有人鸣牌， 则些役不成立。

\beginsection 4.6 特殊役

\yaku.流局满贯
发生荒牌时， 如果自家打出的牌均为幺九牌， 且未被鸣牌， 则计作满贯。

\beginsection 5. 翻

和牌时， 跟据役种和宝牌计算翻数。
除非另有说明， 役种的翻数可以复合。  役满则无需计算翻数。

宝牌指示牌的下一张牌被确定为宝牌， 按照以下顺序：
$$\let~\rightarrow\displaylines{
1~2~3~4~5~6~7~8~9~1\cr
🀀~🀁~🀂~🀃~🀀\cr
🀄~🀆~🀅~🀄\cr
}$$
开局 （杠牌） 时翻开的宝牌指示牌指定的牌称为 “表宝牌” （“杠宝牌”）。
如和牌者宣告了立直， 则每张翻开的宝牌指示牌所在牌墩的下张牌也翻开，
作为宝牌指示牌， 由它们指定的牌称为 “里宝牌” （“杠里宝牌”）。
有些对局中， 会将若干牌 （一般为$🀋🀔🀝$） 涂成红色， 这些牌本身就是宝牌，
也称为 “赤宝牌”。

除了役种带来的翻数外， 每张宝牌计一翻。
如果同一张牌多次成为宝牌， 则获得的翻数累计。

和牌时， 翻数达到 5~翻， 则计为{\bf 满贯}； 6~翻和 7~翻称为{\bf 跳满}；
8---10~翻称为{\bf 倍满}； 11~翻和 12~翻称为{\bf 三倍满}；
13~翻及以上称为{\bf 累计役满}。

\beginsection 6. 符

当和牌的翻数在满贯以下时， 需要计算牌面的符数。
符数由以下部分组成：

\item{1.} 符底， 计 20~符；
\item{2.} 门前荣和， 计 10~符；
\item{3.} 面子加符。 非幺九牌， 明刻计 2~符， 暗刻计 4~符， 明杠计 8~符，
暗杠计 16~符； 幺九牌按照非幺九牌的两倍计符。
\item{4.} 听牌加符。 嵌张、 边张、 单骑听牌
（此处只考虑造成和牌的牌与手牌的关系） 计 2~符。
\item{5.} 雀头加符。 役牌作为雀头的， 计 2~符。
有些规则中， 连风牌作雀计 4~符。
\item{6.} 自摸加符 。 平和以外的役自摸， 计 2~符。

计算得到的符数以 10 为单位向上取整。
如果和牌是七对子， 则按 25~符固定符数计算， 不取整到 30~符。

\beginsection 7. 点

每位玩家初始拥有 25000~点， 每局结束时进行点数结算。
和牌者获得的点数由三部分组成：

\item{1.} 和牌点数， 根据役种、 翻数和符数确定；
\item{2.} 本场点数， 为本场数乘以 300；
\item{3.} 立直供托。

立直供托总是由宣告立直者支付。 其余前两项， 荣和时由放铳 （打出使人和牌的牌）
者支付， 自摸时由其余所有玩家支付。

计算和牌点数时， 设符数为~$x$， 翻数为~$y$。 然后计算基本点数
$$a=\cases{
\min\{x\times2^{2+y}, 2000\}& $y=1,2,3,4;$\cr
2000& $y=5;$ （满贯）\cr
3000& $y=6,7;$ （跳满）\cr
4000& $y=8,9,10;$ （倍满）\cr
6000& $y=11,12;$ （三倍满）\cr
8000& $y\ge 13.$ （累计役满）\cr
}$$
东家和牌时， 得 $6a$~点， 由放铳者支付， 或自摸时其余每人支付 $2a$~点；
其他玩家和牌时， 得 $4a$~点， 由放铳者支付， 或自摸时东家支付 $2a$~点，
另外两家各支付 $a$~点。
但是， 在支付的时候， 以 100~点为单位向上取整。

役满的情况， 按 $a=8000$ 计算。
一部分规则允许役满复合， 例如
$$🀀🀀🀀\,🀁🀁🀁\,🀂🀂🀂\,🀃🀃🀃\,🀆\hbox{ 和 }🀆$$
算作大四喜、 四暗刻单骑、 字一色， $a=24000$。
另有部分规则将下列役记作双倍役满， 按役满的两倍计点数。
\item{1.} 国士无双十三面听；
\item{2.} 四暗刻单骑；
\item{3.} 大四喜；
\item{4.} 纯正九莲宝灯。

也可从以下点数速查表中得到和牌点数。
格式为 ${\bf \underline{6a}/4a}\;(\underline{2a},a)$。
为节省版面， 表中的数已除以 100。

\midinsert\tabskip.587em plus .003em minus .003em\offinterlineskip
\def\mrule#1{\multispan{#1}\kern-\tabskip\hrulefill}
\halign to\hsize{\hfil\raise8pt\hbox{#}&&\vrule#&\hfil#\hfil\cr
\noalign{\hrule}
\omit&height10pt depth2.5pt&
1 翻&&2 翻&&3 翻&&4 翻&&满贯&&跳满&&倍满&&三倍满&&役满\cr
\noalign{\hrule}
\fu{20}{4}&&
\points{20}{40}{80}{120}&&
\points{30}{60}{120}{180}&&
\points{40}{80}{160}{240}&&
\points{60}{120}{240}{360}&&
\points{80}{160}{320}{480}\cr
\mrule{10}&& && && && &\cr
\fu{25}{4}&& && && && &\cr
\mrule{10}&& && && && &\cr
\fu{30}{4}&& && && && &\cr
\mrule{10}&& && && && &\cr
\fu{40}{3}&&\multispan3&& && && &\cr
\mrule8&    \multispan3&& && && &\cr
\fu{50}{3}&&\multispan3&& && && &\cr
\mrule8&    \multispan3&& && && &\cr
\fu{60}{3}&&\multispan3&& && && &\cr
\mrule8&    \multispan3&& && && &\cr
\fu{70}{2}&&\multispan5&& && && &\cr
\mrule6&    \multispan5&& && && &\cr
\fu{80}{2}&&\multispan5&& && && &\cr
\mrule6&    \multispan5&& && && &\cr
\fu{90}{2}&&\multispan5&& && && &\cr
\mrule6&    \multispan5&& && && &\cr
\fu{100}2&& \multispan5&& && && &\cr
\mrule6&    \multispan5&& && && &\cr
\fu{110}2&& \multispan5&& && && &\cr
\noalign{\hrule}
}\endinsert

如当前为 $x$~本场， 则荣和时放铳者另支付 $300x$~点，
自摸时其余各家各自支付 $100x$~点。

和牌时， 立直供托归和牌者。 如果是流局， 则供托保留。

发生荒牌时， 除非是荒牌满贯的情况， 需进行流局罚符。
设有 $x$~人听牌而 $y$~人未听牌，
则当 $xy\ne0$ 时， 未听牌者每人支付 $3000/y$~点， 听牌者每人获得 $3000/x$~点。

当所有牌局都打完， 或者有人点数为负数时， 比赛结束。
按照每人拥有的点数计算排名。
如计分， 则以 30000~点为界， 每超 1000~点得 1~分， 每不足 1000~点扣 1~分。
第一名额外得 20~分。
部分规则中， 如无人达到 30000~点， 则进入下一场
（如， 东风战东四局后要进入南风场）， 直到有人达到 30000~点为止。
除此以外， 亦有其他的计分规则。

\bye
