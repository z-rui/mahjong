% Replace the following font with a symbol font
% on your system that has Mahjong tiles (U+1F000---U+1F02B)
\font\tensym="Noto Sans Symbols2" scaled\magstep1

\catcode`@=11
\newfam\symfam
\textfont\symfam=\tensym
\def\sym{\fam\symfam\tensym}

\count@="1F000
\loop \Umathcode\count@=\z@\symfam\count@
\ifnum\count@<"1F02B \advance\count@\@ne \repeat

\def\xform#1\box#2{{\pdfextension literal{q #1 cm}%
 \wd#2\z@\box#2\pdfextension literal{Q}}}

\def\rotl#1{{\setbox\z@\hbox{#1}\dimen@=\dp\z@ \dimen@ii=\wd\z@
 \vrule height\z@ depth\z@ width\ht\z@
 \xform{0 1 -1 0 0 -0.6}\box\z@
 \vrule height\dimen@ii width\z@
 \vrule height\z@ depth\z@ width\dimen@}}

\zhsetkind3{★▲}

\def\yaku#1#2 {\par\leftline{\bf#2\if#1*★\else\if#1^▲\fi\fi}\nobreak}

\def\points#1#2#3#4{\vbox{\kern\p@
 \ialign{\hfil$\mathstrut##$\hfil\cr
  \bf\underline{#4}/#3\cr
  (\underline{#2},#1)\cr}\kern\p@}}

\newcount\pts@count \newcount\fan@count
\def\pts@#1{\the\numexpr(#1*\pts@count+49)/100}

\def\fu#1#2{#1 符\global\pts@count=\numexpr4*#1\relax
 \global\chardef\fan@max=#2\relax
 \global\fan@count=\@ne
 \fu@}
\def\fu@{&&\global\multiply\pts@count\tw@
  \edef\next{\noexpand\points{\pts@\@ne}{\pts@\tw@}{\pts@4}{\pts@6}}\next
  \ifnum\fan@count<\fan@max \global\advance\fan@count\@ne \expandafter\fu@\fi}

\catcode`@=12
